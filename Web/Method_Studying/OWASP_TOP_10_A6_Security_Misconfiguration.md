#Mentoring_Web #OWASP_TOP_10

이번엔 Security Misconfiguration, 보안 정책이 잘못 설정된 경우인 것 같다. 가장 자주 보이는 실수이기도 하다. 이는 보통 보안을 고려하지 않은 설정이나, ad hoc의 설정이 마무리 되지 않은 경우, 공개된 클라우드 저장공간, 잘못 설정된 HTTP 헤더, 그리고 서버단의 민감한 정보가 포함된 에러 메시지가 출력되는 경우 문제가 발생할 수 있다. 시스템의 모든 구성 요소들은 최신 상태로 패치되고 업그레이드 되어야 한다.

우선 공격 가능성은 3점이다. 공격자는 패치되지 않은 취약점이나 기본 계정, 사용되지 않는 페이지, 보호되지 않은 파일들과 디렉토리, 시스템에 대한 지식을 공격하려 한다.

존재 가능성, 발견 가능성도 3점이다. Security misconfiguration은 어플리케이션의 구성 요소에서 네트워크 서비스부터 플랫폼, 웹 서버, 애플리케이션 서버, 데이터베이서, 프레임워크, 커스텀 코드, 미리 설치된 가상 머신, 컨테이너, 스토리지꺼지 어떠한 레벨에서도 발견될 수 있다. 자동화된 스캔기는 이러한 설정 오류나 기본 상태의 계정의 사용, 필요하지 않은 서비스의 사용이나 이전 상태의 설정 들을 발견할 수 있다.

기술적 영향은 2점이다. 이러한 취약점은 공격자들에게 시스템 데이터나 기능에 대해 승인되지 않은 접근을 줄 수 있다. 이러한 취약점은 전체 시스템의 노출로 이어지게 된다.

어플리케이션이 공격 받는 상황을 알아보자

-- 어플리케이션 구성 요소에 적절한 보안 강화 정책이 적요되지 않았거나, 클라우드 서비스에권한 설정이 적절히 이루어지지 않았을 때

-- 필요 없는 기능들이 설치되거나 활성화되었을 때

-- 프로그램의 기본 계정과 비밀번호가 사용 가능하고 기본 상태로 있을 때

-- 너무 많은 정보를 포함하거나 스택의 구조가 드러난 에러가 유저에게 전달될 때

-- 업그레이드 된 시스템에, 가장 최근에 적용된 보안 기능이 적절히 세팅되지 않았을 때

-- 어플리케이션 서버, 어플리케이션 프레임워크, 라이브러리, 데이터베이스의 보아ㅓㄴ 세팅이 secure value로 설정되지 않았을 때

-- 서버가 보안 헤더와 directive를 사용하지 않거나, secure value로 설정되지 않았을 때

-- 소프트웨어가 오래되었거나 취약할 때

반복적이고 concerted되지 않은 보안 설정이 없으면, 시스템이 더 취약해 질 수 있다.

예방법은 다음과 같다.

-- 빠르고 다른 환경에 쉽게 적용할 수 있는 적절한 보안 강화 프로세스를 사용한다. 개발, QA, 생산 환경에서 동일한 정책에 다른 credentials가 적용되어야 한다. 이러한 과정은 자동화되어 새로운 환경을 만들때의 필요한 과정을 최소화되어야 한다.

-- 플랫폼을 필요로하는 기능, 요소, 문서, 샘플로 최소화시켜야 한다. 안쓰는 기능과 프레임워크는 지우고 깔지 마라.

-- 업데이트나 패치가 이루어 졌을때 패치 관리 프로세스에서 모든 보안 노트를 확인하고 설정을 검토하고 업데이트하는 과정이 필요하다. 특히 클라우드 권한을 확인해라.

-- 요소나 테넌트 간의 효율성과 보안성을 위한 분리가 이루어지는 세그먼트 어플리케이션 구조를 사용해라.

-- 클라이언트에게 security directive를 보내라.

-- 모든 환경에 설정을 적용하고 확인하는 자동화 과정을 만들어 효율적인 관리를 하면 좋다.

공격 시나리오를 좀 보자.

-- 제작 서버에서 사용중인 샘플 어플리케이션을 어플리케이션 서버에 적용하는 경우, 이러한 샘플 어플리케이션은 공격자들이 서버를 유출시키기 위해 취약점으로 이용할 수 있는 문제들이 있다. 이러한 어플리케이션 중 하나가 관리자의 콘솔인 경우나 기본 계정이 사용중인 경우, 기본 비밀번호로 공격자가 시스템을 장악할 수 있다.

-- 디렉토리 나열이 비활성화 되지 않은 경우.공격자들이 디렉토리 구조를 발견할 수 있다. 공격자들은 자바 클래스를 찾아 다운로드해서, 디컴파일해 리버스 엔지니어링을 통해 코드를 들여다 볼 수 있다. 이를 통해 접근 제한 취약점을 발견할 수 있다.

-- 어플리케이션 서버의 설정이 자세한 에러 메시지를 유저에게 보내는 경우, 민감한 정보나 구성 요소의 버전같은 잠재적 취약점들이 노출될 수 있다.

-- 클라우드 서비스 제공자가 다른 클라우드 서비스 유저에게 공유 설정을 열어두는 경우, 클라우드 서버에 저장된 민감한 정보에 접근될 수 있다.

그러하다.