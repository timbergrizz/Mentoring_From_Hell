#Mentoring_Web #OWASP_TOP_10

두번째 문제는 Broken Authentication(인증 취약점) 이다. 인증이나 세션 관리와 관련된 어플리케이션의 기능은 자주 잘못 사용되어 공격자에게 비밀번호나, 키, 세션 토큰등을 노출하게 되고, 아니면 다른 취약점을 노출해 다른 유저의 신원을 뺏을 수 있다.

공격자들은 credential stuffing, 기본 관리자 권한 리스트, 자동화된 무작위 대입 공격, 그리고 단어 공격 툴을 이용해 엄청나게 많은 유효한 username에 비밀번호를 조합해 낸다. 세션 매니지먼트 공격은 잘 이해되고, 이는 특히 만료되지 않은 세션 토큰과 연관되어 이루어진다. 공격 가능성은 3으로 가장 높다.

존재 가능성과 감지 가능성은 모두 2점으로 중간이다. 인증 취약점 공격은 대부분 신원 인증과 접근 권한 통제의 디자인에서 존재가 가능하다. 세션 관리는 인증, 접근 관리에서 근본적인 요소이며, 모든 stateful 어플리케이션에서 존재한다. 이때 stateful은, 서버가 클라이언트의 상태를 기억하는 것을 의미한다.

기술적 영향은 3점으로 가장 높은 점수이다. 이 공격은 데이터 손실, 오염, 그리고 데이터 유출과 접근 제한등의 공격으로 이어질 수 있다. 비즈니스 관련 얘기는 다 똑같아서 이제 안할거다.

유저의 신원, 인증, 세션 관리 등의 확인은 인증 관련 공격을 방어하는 데 있어 중요히디. 인증 관련 취약점은 다음과 같은 상황에서 발생할 수 있다.

-- 자동 공격을 허용해, 공격자가 유효한 id와 비밀번호 조합을 알아낼 수 있을 때
-- 브루트포스나 다른 자동화 공격을 허용할 때
-- 비밀번호의 보안성이 낮을 때(잘 알려지거나 쉬운 비밀번호를 사용할 때)
-- 비밀번호 복구 과정의 보안성이 낮을 때(잘 알려지거나 쉬운 보안 질문 등을 사용할 때)
-- 비밀번호를 저장할 때 평문이나, 약한 해시화를 이용해 암호화 할 때
-- 다중 요소 인증에서 비효율적이거나 효과가 없울 때
-- url에 세션 id를 노출할 때(URL 조작 가능)
-- 로그인 이후 session id를 바꾸지 않을 때
-- 세션id, 유저의 세션, 인증 토큰을 적절히 무효화 시키지 않을 때

예방법을 한번 읽어보자. 

-- 자동 공격, credential stuffing, 무작위 대입, 훔친 credential 재사용 공격을 막기 위해 가능하다면 로그인에 다중 인증을 사용하기.
-- 어떠한 기본 신뢰 요소도 사용하지 말기. 특히 관리자 계정, root 비밀번호가 root면 골때린다.
-- 약한 패스워드 피하기. + 현대 패스워드의 규정에 따라 충분한 길이, 복잡성, 위치로 배열하기.
-- 등록, credential recovery, api pathway를 강화해 모든 결과에 동일한 메시지에 답하는 enumeration 공격에 당하지 않도록 하기.
-- 로그인 시도 수를 제한하기. 모든 실패를 기록하고, 자동화 공격들이 감지되었을 때 관계자에게 이를 알리기.
-- 서버단에서 보안이 보장된 내장 세션 매니저를 사용하고, 랜덤 세션id를 만들도록 하기.
-- 세션 id는 url에 존재해선 안되고, 안전하게 보관되어야 하며, 로그아웃, 시간 초과 등의 상황에서 무효화되어야한다.

계속 공격 기법들에 대해 얘기는 했는데 자세히 설명은 안되서 좀 더 써본다,
-- Crudential stuffing은 알려진 비밀번호들을 사용하는 것이다, 어플리케이션이 내장된 위협 감지 시스템이나 보호 장치가 없다면, 신원 정보의 유효성을 판정하는 오라클로 쓰일 수 있다. 오라클이 뭐냐고? 오랜만에 롤이나 좀 해보렴
-- 대부분의 인증 공격은 패스워드의 계속된 사용으로 발생한다, 약한 패스워드를 계속 사용하지 않도록 하는 것이 중요하다.
-- 세션 시간 초과가 적절히 설정되지 않았을 때 발생할 수 있다. 로그아웃 대신 브라우저를 닫는다면, 공격자가 브라우저에 접근해 인증된 계정을 사용할 수 있다.

여튼 이정도면 될 것 같다.
